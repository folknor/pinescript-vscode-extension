// @test validation/type-coercion
// @description Type coercion rules - series to simple, numeric to color/string, array coercion
// @expects parse: success
// @expects no-errors

//@version=6
indicator("Type Coercion Tests")

// series<T> -> T coercion (series values in simple contexts)
float simpleFloat = close  // series<float> -> float
int simpleInt = bar_index  // series<int> -> int
bool simpleBool = close > open  // series<bool> -> bool

// Cross-type series to simple
int fromSeriesFloat = close  // series<float> -> int
float fromSeriesInt = bar_index  // series<int> -> float

// Numeric -> color coercion (ARGB integers)
color fromInt = 16711680
color fromFloat = 16711935.0

// Numeric -> string coercion (implicit str.tostring)
string fromIntStr = 42
string fromFloatStr = 3.14

// Array type coercion - array<type> (unresolved) to concrete array
var array<float> arr = array.new<float>()
array.push(arr, 1.0)

// Color -> numeric coercion
int colorAsInt = color.red
float colorAsFloat = color.blue

plot(simpleFloat)
